<!DOCTYPE html>
<html  >
{% include 'header.html' %}
</br>
</br>
</br>
</br>
</br>
<center>
<div id='loginform' class='item-title mbr-fonts-style display-7 align-items-center'>
<h1><strong>Reset Password</strong></h1>
</br>
</br>
Please use the form below to reset your password.
</br>
</br>
</br>
<center>

<label for="email" class="col-sm-2 col-form-label"><strong>Email address</strong></label>
<div class="col-sm-3">
	<input type="email" class="form-control" id="email">
</div>
</br> 
</center>
</br>
<button type=submit class="btn btn-primary display-4" id="toggle" onclick="resetUser()"><strong>Reset</strong></button>
</br>
</br>
Wanting to login? <a href='{{base_url}}/login'>click here.</a>
</br>
</br>
</div>
</center>

</br>
</br>
</br>
</br>
</br>
</br>

<script>
function validateEmail(email) {
  var re = /\S+@\S+\.\S+/;
  return re.test(email);
}

function resetUser() {
  email=document.getElementById('email').value

  if (validateEmail(email) === true) {

    let data = {"email": email};
    console.log(data);
    fetch("{{base_url}}/api/user/reset/email", {
      method: "POST",
      headers: {'Content-Type': 'application/json'}, 
      body: JSON.stringify(data)
    }).then(res => {
      console.log("Response:", res);
    }).then(Swal.fire({icon: "success",
            title: "Check your email",
            text: "Please check your email to reset your password.",
            confirmButtonColor: '#2d80f9',
            confirmButtonText: 'close'}).then(function() {window.location = "{{base_url}}";}));
  }
};

</script>

</html>